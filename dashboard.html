<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>User Dashboard - McGibs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>

  <script>
    const userEmail = sessionStorage.getItem("loggedInUser");
    const userData = localStorage.getItem(userEmail);

    if (!userEmail || !userData) {
      alert("Please log in first.");
      window.location.href = "login.html";
    }
  </script>

  <div class="container mt-5">
    <h2 class="text-center">Welcome to Your Dashboard</h2>
    <div id="userInfo" class="text-center mt-4"></div>

    <div class="text-center mt-4">
      <a href="protected-samples.html" class="btn btn-primary m-2">View Samples</a>
      <a href="unlocked-samples.html" class="btn btn-success m-2">Unlocked Library</a>
      <button class="btn btn-danger m-2" onclick="logout()">Logout</button>
    </div>
  </div>

  <script>
    const user = JSON.parse(localStorage.getItem(userEmail));
    const infoBox = document.getElementById("userInfo");

    infoBox.innerHTML = `
      <p><strong>Email:</strong> ${userEmail}</p>
      <p><strong>Downloads Used:</strong> ${user.downloads || 0} / 5</p>
      <p><strong>Premium User:</strong> ${user.premium ? "Yes" : "No"}</p>
    `;

    function logout() {
      sessionStorage.removeItem("loggedInUser");
      alert("Logged out.");
      window.location.href = "login.html";
    }
  </script>

</body>
</html>
